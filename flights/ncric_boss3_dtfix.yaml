entityDefinitions:
  vehicles:
    fqn: "ol.vehicle"
    entitySetName: "NCRICVehicles"
    propertyDefinitions:
      ol.id:
        type: "ol.id"
        column: "red_vrm"
    name: "vehicles"

  confidencemetrics:
    fqn: "ol.confidencemetrics"
    entitySetName: "NCRICConfidenceMetrics"
    propertyDefinitions:
      ol.id: 
        type: "ol.id"
        column: "red_id" 
    name: "confidencemetrics"

  vehiclerecords:
    fqn: "ol.vehicle"
    entitySetName: "NCRICVehicleRecords"
    propertyDefinitions:
      ol.id:
        type:  "ol.id" 
        column: "red_id"
      ol.datelogged:
        type: "ol.datelogged"
        column: "date"
        transforms:
        - !<transforms.TimezoneShiftTransform>
          pattern: ["yyyy-MM-dd HH:mm:ss.S","yyyy-MM-dd HH:mm:ss.SS","yyyy-MM-dd HH:mm:ss.SSS"]
          timezone: "America/Los_Angeles"
    updateType: partialReplace
    name: "vehiclerecords"

  imagesources:
    fqn: "ol.imagesource"
    entitySetName: "NCRICImageSources"
    propertyDefinitions:
      ol.id:
        type:  "ol.id" 
        column: "sourceid"
    name: "imagesources"

  agencies:
    fqn: "ol.agency"
    entitySetName: "NCRICAgencies"
    propertyDefinitions:
      ol.id: 
        type: "ol.id"
        column: "siteid" 
    name: "agencies"

associationDefinitions:
  recordedby1:
    fqn: "ol.recordedby"
    entitySetName: "NCRICRecordedBy"
    src: "vehiclerecords"
    dst: "imagesources"
    propertyDefinitions:
      ol.datelogged:
        type: "ol.datelogged"
        column: "date"
        transforms:
        - !<transforms.TimezoneShiftTransform>
          pattern: ["yyyy-MM-dd HH:mm:ss.S","yyyy-MM-dd HH:mm:ss.SS","yyyy-MM-dd HH:mm:ss.SSS"]
          timezone: "America/Los_Angeles"
      general.stringid:
        type: "general.stringid"
        transforms:
        - !<transforms.ConcatTransform>
          columns: ["red_id","sourceid"] 
    updateType: partialReplace
    name: "recordedby1"

  recordedby2:
    fqn: "ol.recordedby"
    entitySetName: "NCRICRecordedBy"
    src: "vehiclerecords"
    dst: "agencies"
    propertyDefinitions:
      ol.datelogged:
        type: "ol.datelogged"
        column: "date"
        transforms:
        - !<transforms.TimezoneShiftTransform>
          pattern: ["yyyy-MM-dd HH:mm:ss.S","yyyy-MM-dd HH:mm:ss.SS","yyyy-MM-dd HH:mm:ss.SSS"]
          timezone: "America/Los_Angeles"
      general.stringid:
        type: "general.stringid"
        transforms:
        - !<transforms.ConcatTransform>
          columns: ["red_id","siteid"]
    updateType: partialReplace
    name: "recordedby2"

  includes1:
    fqn: "ol.includes"
    entitySetName: "NCRICIncludes"
    src: "vehiclerecords"
    dst: "confidencemetrics"
    propertyDefinitions:
      general.id:
        type: "general.id"
        transforms:
        - !<transforms.ConcatTransform>
          columns: ["red_id", "date"]
          separator: "_"
      date.completeddatetime:
        type: "date.completeddatetime"
        column: "date"
        transforms:
        - !<transforms.TimezoneShiftTransform>
          pattern: ["yyyy-MM-dd HH:mm:ss.S","yyyy-MM-dd HH:mm:ss.SS","yyyy-MM-dd HH:mm:ss.SSS"]
          timezone: "America/Los_Angeles"
    updateType: partialReplace
    name: "includes1"

  includes2:
    fqn: "ol.includes"
    entitySetName: "NCRICIncludes"
    src: "imagesources"
    dst: "confidencemetrics"
    propertyDefinitions:
      general.id:
        type: "general.id"
        transforms:
        - !<transforms.ConcatTransform>
          columns: ["sourceid", "date"]
          separator: "_"
      date.completeddatetime:
        type: "date.completeddatetime"
        column: "date"
        transforms:
        - !<transforms.TimezoneShiftTransform>
          pattern: ["yyyy-MM-dd HH:mm:ss.S","yyyy-MM-dd HH:mm:ss.SS","yyyy-MM-dd HH:mm:ss.SSS"]
          timezone: "America/Los_Angeles"
    updateType: partialReplace
    name: "includes2"

